# Нагрузочное тестирование видеоконференцсвязи VideoGrace

Для быстрой оценки производительного клиентских машин на конференции с большим числом участников разработан специальный инструмент позволяющий эмулировать конференцию с заданным числом участников.

## Установка и подготовка тестового клиента

Для начала, скачайте [консольный тестовый клиент](../../../../download/ShClnt.zip)

Распакуйте архив на любую машину подключенную к VideoGrace Server и откройте блокнотом файл run.cmd 

    set server="192.168.1.100:8778"
    set conference="default"
    set play_file="play.mkv"
    set count=10

    for /L %%B in (1,1,%count%) do start ShClnt.exe %server% test%%B 1 %conference% %play_file%

В данном файле установите значение переменным 

 - server - адрес вашего сервера
 - count - количество требуемых тестовых клиентов

На сервере нужно завести учетные записи для тестовых клиентов. Они должны иметь логины вида: test1, test2, test3, ... пароли у всех: 1. 

Можно [скачать csv файл](../../../../download/test_users.zip) в котором заведены учетные записи на 40 тестовых клиентов и загрузить его через загрузку файлов csv на сервере.
Добавьте тестовых клиентов в участники конференции с тегом default


## Проведение нагрузочного тестирования

Подключите к конференции default VideoGrace Client, затем запустите run.cmd. 

Вы должны увидеть и услышать воспроизводмые тестовыми клиентами видео файлы. 

VideoGrace Client будет подключать видеопотоки до тех пор, пока загрузка ЦП не превысит 80%. 
Это позволяет оценить сколько видеопотоков сможет быть воспроизведено. 

Если число потоков недостаточно, можно уменьшить разрешение видеопотоков, для этого, при помощи VideoGrace Client сделайте запись файла с меньшим разрешением (320x240) и повторите тестирование с этим файлом.